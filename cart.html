<!DOCTYPE html>
<html lang="en">
<head>
  <title>Cart</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" href="style.css">

  <style>
    body{background:#000;color:#fff;font-family:Arial}

    .cart-container{
      max-width:900px;
      margin:20px auto;
      padding:15px;
    }

    h1{text-align:center;color:#ff1a1a}

    .cart-item{
      border:2px solid #ff1a1a;
      border-radius:14px;
      padding:15px;
      margin-bottom:18px;
      box-shadow:0 0 10px #ff1a1a;
      text-align:center;
    }

    .qty-box{
      display:flex;
      justify-content:center;
      align-items:center;
      gap:18px;
      margin:12px 0;
    }

    .qty-box button{
      background:#ff1a1a;
      border:none;
      padding:10px 18px;
      border-radius:8px;
      font-size:18px;
      font-weight:bold;
      cursor:pointer;
    }

    .remove-btn{
      background:#ff1a1a;
      border:none;
      padding:8px 20px;
      border-radius:8px;
      font-weight:bold;
      cursor:pointer;
      margin-top:10px;
    }

    #total{
      text-align:center;
      font-size:22px;
      margin:20px 0;
      color:#ff1a1a;
    }

    #checkout-btn{
      display:block;
      margin:0 auto;
      padding:14px 35px;
      background:#ff1a1a;
      border:none;
      border-radius:12px;
      font-weight:bold;
      cursor:pointer;
      box-shadow:0 0 10px #ff1a1a;
    }

    /* MODAL */
    .modal{
      display:none;
      position:fixed;
      inset:0;
      background:rgba(0,0,0,0.85);
      z-index:999;
      padding:10px;
    }

    .modal-content{
      background:#111;
      max-width:420px;
      width:100%;
      margin:auto;
      padding:22px;
      border-radius:16px;
      border:2px solid #ff1a1a;
      box-shadow:0 0 15px #ff1a1a;
    }

    .modal-content h2{
      text-align:center;
      color:#ff1a1a;
      margin-bottom:15px;
    }

    .modal-content input,
    .modal-content textarea{
      width:100%;
      padding:12px;
      margin-top:10px;
      background:#222;
      color:#fff;
      border:1px solid #ff1a1a;
      border-radius:10px;
    }

    .place-order,
    .whatsapp-btn{
      margin-top:12px;
      width:100%;
      padding:12px;
      border:none;
      border-radius:10px;
      font-weight:bold;
      cursor:pointer;
    }

    .place-order{background:#ff1a1a}
    .whatsapp-btn{background:#25D366;color:#000}

    @media(max-width:600px){
      h1{font-size:22px}
      #checkout-btn{width:100%}
    }
  </style>
</head>

<body>

<nav>
  <a href="index.html">Home</a>
  <a href="products.html">Products</a>
  <a href="about.html">About</a>
  <a href="cart.html" class="active">Cart</a>
</nav>

<div class="cart-container">
  <h1>Your Cart</h1>
  <div id="cart-items"></div>
  <div id="total">Total: ₨ 0</div>
  <button id="checkout-btn" onclick="openCheckout()">Checkout</button>
</div>

<!-- CHECKOUT -->
<div class="modal" id="checkoutModal">
  <div class="modal-content">
    <h2>Checkout</h2>

    <form id="orderForm" action="https://api.web3forms.com/submit" method="POST">
      <input type="hidden" name="access_key" value="41466539-4bd3-4013-8536-d1e59d78d0f0">
      <input type="hidden" name="subject" value="New Neon Order">
      <input type="hidden" name="cart_details" id="cartDetails">

      <input type="text" name="name" placeholder="Your Name" required>
      <input type="email" name="email" placeholder="Your Email" required>
      <input type="text" name="phone" placeholder="Phone Number" required>
      <textarea name="address" placeholder="Delivery Address" required></textarea>
      <textarea name="instructions" placeholder="Neon color, font, size, other instructions"></textarea>

      <button class="place-order" type="submit">Place Order</button>
    </form>

    <button class="whatsapp-btn" onclick="sendWhatsApp()">Send Order on WhatsApp</button>
  </div>
</div>

<script>
function loadCart(){
  let cart = JSON.parse(localStorage.getItem("cart")) || [];
  let box = document.getElementById("cart-items");
  let totalEl = document.getElementById("total");
  box.innerHTML="";
  let total=0;

  if(cart.length===0){
    box.innerHTML="<p>Your cart is empty.</p>";
    document.getElementById("checkout-btn").style.display="none";
    return;
  }

  document.getElementById("checkout-btn").style.display="block";

  cart.forEach((item,i)=>{
    if(!item.name) item.name="Custom Neon";
    if(!item.quantity) item.quantity=1;

    let price=item.price*item.quantity;
    total+=price;

    box.innerHTML+=`
      <div class="cart-item">
        <h3>${item.name}</h3>
        <p>₨ ${item.price}</p>
        <div class="qty-box">
          <button onclick="qty(${i},-1)">−</button>
          <span>${item.quantity}</span>
          <button onclick="qty(${i},1)">+</button>
        </div>
        <p><strong>₨ ${price}</strong></p>
        <button class="remove-btn" onclick="removeItem(${i})">Remove</button>
      </div>`;
  });

  totalEl.innerHTML="Total: ₨ "+total;
  localStorage.setItem("cart",JSON.stringify(cart));
}

function qty(i,c){
  let cart=JSON.parse(localStorage.getItem("cart"));
  cart[i].quantity+=c;
  if(cart[i].quantity<1) cart[i].quantity=1;
  localStorage.setItem("cart",JSON.stringify(cart));
  loadCart();
}

function removeItem(i){
  let cart=JSON.parse(localStorage.getItem("cart"));
  cart.splice(i,1);
  localStorage.setItem("cart",JSON.stringify(cart));
  loadCart();
}

function openCheckout(){
  document.getElementById("checkoutModal").style.display="flex";
  document.getElementById("cartDetails").value =
    JSON.stringify(JSON.parse(localStorage.getItem("cart")));
}

function sendWhatsApp(){
  let cart=JSON.parse(localStorage.getItem("cart"))||[];
  let msg="New Neon Order:%0A";
  cart.forEach(i=>{
    msg+=`${i.name} x ${i.quantity} = Rs ${i.price*i.quantity}%0A`;
  });
  window.open(`https://wa.me/923000767300?text=${msg}`,"_blank");
}

loadCart();
</script>

</body>
</html>
